(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Ht(e,t){return e.exec(t)?.groups}const ze=/^tuple(?<array>(\[(\d*)\])*)$/;function xe(e){let t=e.type;if(ze.test(e.type)&&"components"in e){t="(";const n=e.components.length;for(let r=0;r<n;r++){const i=e.components[r];t+=xe(i),r<n-1&&(t+=", ")}const o=Ht(ze,e.type);return t+=`)${o?.array||""}`,xe({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function G(e){let t="";const n=e.length;for(let o=0;o<n;o++){const r=e[o];t+=xe(r),o!==n-1&&(t+=", ")}return t}function Ot(e){return e.type==="function"?`function ${e.name}(${G(e.inputs)})${e.stateMutability&&e.stateMutability!=="nonpayable"?` ${e.stateMutability}`:""}${e.outputs?.length?` returns (${G(e.outputs)})`:""}`:e.type==="event"?`event ${e.name}(${G(e.inputs)})`:e.type==="error"?`error ${e.name}(${G(e.inputs)})`:e.type==="constructor"?`constructor(${G(e.inputs)})${e.stateMutability==="payable"?" payable":""}`:e.type==="fallback"?`fallback() external${e.stateMutability==="payable"?" payable":""}`:"receive() external payable"}function ve(e,{includeName:t=!1}={}){if(e.type!=="function"&&e.type!=="event"&&e.type!=="error")throw new Ft(e.type);return`${e.name}(${Xe(e.inputs,{includeName:t})})`}function Xe(e,{includeName:t=!1}={}){return e?e.map(n=>zt(n,{includeName:t})).join(t?", ":","):""}function zt(e,{includeName:t}){return e.type.startsWith("tuple")?`(${Xe(e.components,{includeName:t})})${e.type.slice(5)}`:e.type+(t&&e.name?` ${e.name}`:"")}function ee(e,{strict:t=!0}={}){return!e||typeof e!="string"?!1:t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}function v(e){return ee(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}const Ke="2.45.2";let me={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:n})=>t?`${e??"https://viem.sh"}${t}${n?`#${n}`:""}`:void 0,version:`viem@${Ke}`};class f extends Error{constructor(t,n={}){const o=n.cause instanceof f?n.cause.details:n.cause?.message?n.cause.message:n.details,r=n.cause instanceof f&&n.cause.docsPath||n.docsPath,i=me.getDocsUrl?.({...n,docsPath:r}),s=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...o?[`Details: ${o}`]:[],...me.version?[`Version: ${me.version}`]:[]].join(`
`);super(s,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=o,this.docsPath=r,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=t,this.version=Ke}walk(t){return Qe(this,t)}}function Qe(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause!==void 0?Qe(e.cause,t):t?null:e}class Dt extends f{constructor({expectedLength:t,givenLength:n,type:o}){super([`ABI encoding array length mismatch for type ${o}.`,`Expected length: ${t}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class qt extends f{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${v(n)}) does not match expected size (bytes${t}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class Ut extends f{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${t}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class De extends f{constructor(t,{docsPath:n}={}){super([`Function ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class _t extends f{constructor(t,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${t.type}\` in \`${ve(t.abiItem)}\`, and`,`\`${n.type}\` in \`${ve(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class Rt extends f{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class Mt extends f{constructor(t){super([`Value "${t}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class Ft extends f{constructor(t){super([`"${t}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class Ye extends f{constructor({offset:t,position:n,size:o}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${t}" is out-of-bounds (size: ${o}).`,{name:"SliceOffsetOutOfBoundsError"})}}class Ze extends f{constructor({size:t,targetSize:n,type:o}){super(`${o.charAt(0).toUpperCase()}${o.slice(1).toLowerCase()} size (${t}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function W(e,{dir:t,size:n=32}={}){return typeof e=="string"?z(e,{dir:t,size:n}):Wt(e,{dir:t,size:n})}function z(e,{dir:t,size:n=32}={}){if(n===null)return e;const o=e.replace("0x","");if(o.length>n*2)throw new Ze({size:Math.ceil(o.length/2),targetSize:n,type:"hex"});return`0x${o[t==="right"?"padEnd":"padStart"](n*2,"0")}`}function Wt(e,{dir:t,size:n=32}={}){if(n===null)return e;if(e.length>n)throw new Ze({size:e.length,targetSize:n,type:"bytes"});const o=new Uint8Array(n);for(let r=0;r<n;r++){const i=t==="right";o[i?r:n-r-1]=e[i?r:e.length-r-1]}return o}class Be extends f{constructor({max:t,min:n,signed:o,size:r,value:i}){super(`Number "${i}" is not in safe ${r?`${r*8}-bit ${o?"signed":"unsigned"} `:""}integer range ${t?`(${n} to ${t})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class jt extends f{constructor(t){super(`Hex value "${t}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}class Gt extends f{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${t} bytes.`,{name:"SizeOverflowError"})}}function ce(e,{dir:t="left"}={}){let n=typeof e=="string"?e.replace("0x",""):e,o=0;for(let r=0;r<n.length-1&&n[t==="left"?r:n.length-r-1].toString()==="0";r++)o++;return n=t==="left"?n.slice(o):n.slice(0,n.length-o),typeof e=="string"?(n.length===1&&t==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function D(e,{size:t}){if(v(e)>t)throw new Gt({givenSize:v(e),maxSize:t})}function Jt(e,t){const n={to:t},o=n.to;return o==="number"?Xt(e,n):o==="bigint"?et(e,n):o==="string"?Kt(e,n):o==="boolean"?Vt(e,n):fe(e,n)}function et(e,t={}){const{signed:n}=t;t.size&&D(e,{size:t.size});const o=BigInt(e);if(!n)return o;const r=(e.length-2)/2,i=(1n<<BigInt(r)*8n-1n)-1n;return o<=i?o:o-BigInt(`0x${"f".padStart(r*2,"f")}`)-1n}function Vt(e,t={}){let n=e;if(t.size&&(D(n,{size:t.size}),n=ce(n)),ce(n)==="0x00")return!1;if(ce(n)==="0x01")return!0;throw new jt(n)}function Xt(e,t={}){const n=et(e,t),o=Number(n);if(!Number.isSafeInteger(o))throw new Be({max:`${Number.MAX_SAFE_INTEGER}`,min:`${Number.MIN_SAFE_INTEGER}`,signed:t.signed,size:t.size,value:`${n}n`});return o}function Kt(e,t={}){let n=fe(e);return t.size&&(D(n,{size:t.size}),n=ce(n,{dir:"right"})),new TextDecoder().decode(n)}const Qt=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Yt(e,t={}){return typeof e=="number"||typeof e=="bigint"?_(e,t):typeof e=="string"?ot(e,t):typeof e=="boolean"?tt(e,t):nt(e,t)}function tt(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(D(n,{size:t.size}),W(n,{size:t.size})):n}function nt(e,t={}){let n="";for(let r=0;r<e.length;r++)n+=Qt[e[r]];const o=`0x${n}`;return typeof t.size=="number"?(D(o,{size:t.size}),W(o,{dir:"right",size:t.size})):o}function _(e,t={}){const{signed:n,size:o}=t,r=BigInt(e);let i;o?n?i=(1n<<BigInt(o)*8n-1n)-1n:i=2n**(BigInt(o)*8n)-1n:typeof e=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const s=typeof i=="bigint"&&n?-i-1n:0;if(i&&r>i||r<s){const d=typeof e=="bigint"?"n":"";throw new Be({max:i?`${i}${d}`:void 0,min:`${s}${d}`,signed:n,size:o,value:`${e}${d}`})}const a=`0x${(n&&r<0?(1n<<BigInt(o*8))+BigInt(r):r).toString(16)}`;return o?W(a,{size:o}):a}const Zt=new TextEncoder;function ot(e,t={}){const n=Zt.encode(e);return nt(n,t)}const en=new TextEncoder;function rt(e,t={}){return typeof e=="number"||typeof e=="bigint"?nn(e,t):typeof e=="boolean"?tn(e,t):ee(e)?fe(e,t):it(e,t)}function tn(e,t={}){const n=new Uint8Array(1);return n[0]=Number(e),typeof t.size=="number"?(D(n,{size:t.size}),W(n,{size:t.size})):n}const A={zero:48,nine:57,A:65,F:70,a:97,f:102};function qe(e){if(e>=A.zero&&e<=A.nine)return e-A.zero;if(e>=A.A&&e<=A.F)return e-(A.A-10);if(e>=A.a&&e<=A.f)return e-(A.a-10)}function fe(e,t={}){let n=e;t.size&&(D(n,{size:t.size}),n=W(n,{dir:"right",size:t.size}));let o=n.slice(2);o.length%2&&(o=`0${o}`);const r=o.length/2,i=new Uint8Array(r);for(let s=0,a=0;s<r;s++){const d=qe(o.charCodeAt(a++)),u=qe(o.charCodeAt(a++));if(d===void 0||u===void 0)throw new f(`Invalid byte sequence ("${o[a-2]}${o[a-1]}" in "${o}").`);i[s]=d*16+u}return i}function nn(e,t){const n=_(e,t);return fe(n)}function it(e,t={}){const n=en.encode(e);return typeof t.size=="number"?(D(n,{size:t.size}),W(n,{dir:"right",size:t.size})):n}const ie=BigInt(2**32-1),Ue=BigInt(32);function on(e,t=!1){return t?{h:Number(e&ie),l:Number(e>>Ue&ie)}:{h:Number(e>>Ue&ie)|0,l:Number(e&ie)|0}}function rn(e,t=!1){const n=e.length;let o=new Uint32Array(n),r=new Uint32Array(n);for(let i=0;i<n;i++){const{h:s,l:a}=on(e[i],t);[o[i],r[i]]=[s,a]}return[o,r]}const sn=(e,t,n)=>e<<n|t>>>32-n,an=(e,t,n)=>t<<n|e>>>32-n,cn=(e,t,n)=>t<<n-32|e>>>64-n,dn=(e,t,n)=>e<<n-32|t>>>64-n;function un(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function _e(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Q(e,...t){if(!un(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function de(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function st(e,t){Q(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function ln(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Y(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function ge(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function I(e,t){return e<<32-t|e>>>t}const pn=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function fn(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function hn(e){for(let t=0;t<e.length;t++)e[t]=fn(e[t]);return e}const Re=pn?e=>e:hn;function mn(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Te(e){return typeof e=="string"&&(e=mn(e)),Q(e),e}class at{}function ct(e){const t=o=>e().update(Te(o)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}const gn=BigInt(0),J=BigInt(1),yn=BigInt(2),wn=BigInt(7),bn=BigInt(256),xn=BigInt(113),dt=[],ut=[],lt=[];for(let e=0,t=J,n=1,o=0;e<24;e++){[n,o]=[o,(2*n+3*o)%5],dt.push(2*(5*o+n)),ut.push((e+1)*(e+2)/2%64);let r=gn;for(let i=0;i<7;i++)t=(t<<J^(t>>wn)*xn)%bn,t&yn&&(r^=J<<(J<<BigInt(i))-J);lt.push(r)}const pt=rn(lt,!0),vn=pt[0],$n=pt[1],Me=(e,t,n)=>n>32?cn(e,t,n):sn(e,t,n),Fe=(e,t,n)=>n>32?dn(e,t,n):an(e,t,n);function Sn(e,t=24){const n=new Uint32Array(10);for(let o=24-t;o<24;o++){for(let s=0;s<10;s++)n[s]=e[s]^e[s+10]^e[s+20]^e[s+30]^e[s+40];for(let s=0;s<10;s+=2){const a=(s+8)%10,d=(s+2)%10,u=n[d],p=n[d+1],l=Me(u,p,1)^n[a],m=Fe(u,p,1)^n[a+1];for(let h=0;h<50;h+=10)e[s+h]^=l,e[s+h+1]^=m}let r=e[2],i=e[3];for(let s=0;s<24;s++){const a=ut[s],d=Me(r,i,a),u=Fe(r,i,a),p=dt[s];r=e[p],i=e[p+1],e[p]=d,e[p+1]=u}for(let s=0;s<50;s+=10){for(let a=0;a<10;a++)n[a]=e[s+a];for(let a=0;a<10;a++)e[s+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=vn[o],e[1]^=$n[o]}Y(n)}class Ne extends at{constructor(t,n,o,r=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=o,this.enableXOF=r,this.rounds=i,_e(o),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=ln(this.state)}clone(){return this._cloneInto()}keccak(){Re(this.state32),Sn(this.state32,this.rounds),Re(this.state32),this.posOut=0,this.pos=0}update(t){de(this),t=Te(t),Q(t);const{blockLen:n,state:o}=this,r=t.length;for(let i=0;i<r;){const s=Math.min(n-this.pos,r-i);for(let a=0;a<s;a++)o[this.pos++]^=t[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:o,blockLen:r}=this;t[o]^=n,(n&128)!==0&&o===r-1&&this.keccak(),t[r-1]^=128,this.keccak()}writeInto(t){de(this,!1),Q(t),this.finish();const n=this.state,{blockLen:o}=this;for(let r=0,i=t.length;r<i;){this.posOut>=o&&this.keccak();const s=Math.min(o-this.posOut,i-r);t.set(n.subarray(this.posOut,this.posOut+s),r),this.posOut+=s,r+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return _e(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(st(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Y(this.state)}_cloneInto(t){const{blockLen:n,suffix:o,outputLen:r,rounds:i,enableXOF:s}=this;return t||(t=new Ne(n,o,r,s,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=o,t.outputLen=r,t.enableXOF=s,t.destroyed=this.destroyed,t}}const In=(e,t,n)=>ct(()=>new Ne(t,e,n)),An=In(1,136,256/8);function ft(e,t){const n=t||"hex",o=An(ee(e,{strict:!1})?rt(e):e);return n==="bytes"?o:Yt(o)}const En=e=>ft(rt(e));function Ln(e){return En(e)}function Bn(e){let t=!0,n="",o=0,r="",i=!1;for(let s=0;s<e.length;s++){const a=e[s];if(["(",")",","].includes(a)&&(t=!0),a==="("&&o++,a===")"&&o--,!!t){if(o===0){if(a===" "&&["event","function",""].includes(r))r="";else if(r+=a,a===")"){i=!0;break}continue}if(a===" "){e[s-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}r+=a,n+=a}}if(!i)throw new f("Unable to normalize signature.");return r}const Tn=e=>{const t=typeof e=="string"?e:Ot(e);return Bn(t)};function ht(e){return Ln(Tn(e))}const Nn=ht;class mt extends f{constructor({address:t}){super(`Address "${t}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class gt extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const o=this.keys().next().value;o&&this.delete(o)}return this}}const ye=new gt(8192);function yt(e,t){if(ye.has(`${e}.${t}`))return ye.get(`${e}.${t}`);const n=e.substring(2).toLowerCase(),o=ft(it(n),"bytes"),r=n.split("");for(let s=0;s<40;s+=2)o[s>>1]>>4>=8&&r[s]&&(r[s]=r[s].toUpperCase()),(o[s>>1]&15)>=8&&r[s+1]&&(r[s+1]=r[s+1].toUpperCase());const i=`0x${r.join("")}`;return ye.set(`${e}.${t}`,i),i}function Cn(e,t){if(!M(e,{strict:!1}))throw new mt({address:e});return yt(e,t)}const Pn=/^0x[a-fA-F0-9]{40}$/,we=new gt(8192);function M(e,t){const{strict:n=!0}=t??{},o=`${e}.${n}`;if(we.has(o))return we.get(o);const r=Pn.test(e)?e.toLowerCase()===e?!0:n?yt(e)===e:!0:!1;return we.set(o,r),r}function F(e){return typeof e[0]=="string"?wt(e):kn(e)}function kn(e){let t=0;for(const r of e)t+=r.length;const n=new Uint8Array(t);let o=0;for(const r of e)n.set(r,o),o+=r.length;return n}function wt(e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function bt(e,t,n,{strict:o}={}){return ee(e,{strict:!1})?On(e,t,n,{strict:o}):Hn(e,t,n,{strict:o})}function xt(e,t){if(typeof t=="number"&&t>0&&t>v(e)-1)throw new Ye({offset:t,position:"start",size:v(e)})}function vt(e,t,n){if(typeof t=="number"&&typeof n=="number"&&v(e)!==n-t)throw new Ye({offset:n,position:"end",size:v(e)})}function Hn(e,t,n,{strict:o}={}){xt(e,t);const r=e.slice(t,n);return o&&vt(r,t,n),r}function On(e,t,n,{strict:o}={}){xt(e,t);const r=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return o&&vt(r,t,n),r}const zn=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Dn(e,t){if(e.length!==t.length)throw new Ut({expectedLength:e.length,givenLength:t.length});const n=qn({params:e,values:t}),o=Pe(n);return o.length===0?"0x":o}function qn({params:e,values:t}){const n=[];for(let o=0;o<e.length;o++)n.push(Ce({param:e[o],value:t[o]}));return n}function Ce({param:e,value:t}){const n=Gn(e.type);if(n){const[o,r]=n;return _n(t,{length:o,param:{...e,type:r}})}if(e.type==="tuple")return jn(t,{param:e});if(e.type==="address")return Un(t);if(e.type==="bool")return Mn(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const o=e.type.startsWith("int"),[,,r="256"]=zn.exec(e.type)??[];return Fn(t,{signed:o,size:Number(r)})}if(e.type.startsWith("bytes"))return Rn(t,{param:e});if(e.type==="string")return Wn(t);throw new Rt(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function Pe(e){let t=0;for(let i=0;i<e.length;i++){const{dynamic:s,encoded:a}=e[i];s?t+=32:t+=v(a)}const n=[],o=[];let r=0;for(let i=0;i<e.length;i++){const{dynamic:s,encoded:a}=e[i];s?(n.push(_(t+r,{size:32})),o.push(a),r+=v(a)):n.push(a)}return F([...n,...o])}function Un(e){if(!M(e))throw new mt({address:e});return{dynamic:!1,encoded:z(e.toLowerCase())}}function _n(e,{length:t,param:n}){const o=t===null;if(!Array.isArray(e))throw new Mt(e);if(!o&&e.length!==t)throw new Dt({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let r=!1;const i=[];for(let s=0;s<e.length;s++){const a=Ce({param:n,value:e[s]});a.dynamic&&(r=!0),i.push(a)}if(o||r){const s=Pe(i);if(o){const a=_(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?F([a,s]):a}}if(r)return{dynamic:!0,encoded:s}}return{dynamic:!1,encoded:F(i.map(({encoded:s})=>s))}}function Rn(e,{param:t}){const[,n]=t.type.split("bytes"),o=v(e);if(!n){let r=e;return o%32!==0&&(r=z(r,{dir:"right",size:Math.ceil((e.length-2)/2/32)*32})),{dynamic:!0,encoded:F([z(_(o,{size:32})),r])}}if(o!==Number.parseInt(n,10))throw new qt({expectedSize:Number.parseInt(n,10),value:e});return{dynamic:!1,encoded:z(e,{dir:"right"})}}function Mn(e){if(typeof e!="boolean")throw new f(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:z(tt(e))}}function Fn(e,{signed:t,size:n=256}){if(typeof n=="number"){const o=2n**(BigInt(n)-(t?1n:0n))-1n,r=t?-o-1n:0n;if(e>o||e<r)throw new Be({max:o.toString(),min:r.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:_(e,{size:32,signed:t})}}function Wn(e){const t=ot(e),n=Math.ceil(v(t)/32),o=[];for(let r=0;r<n;r++)o.push(z(bt(t,r*32,(r+1)*32),{dir:"right"}));return{dynamic:!0,encoded:F([z(_(v(t),{size:32})),...o])}}function jn(e,{param:t}){let n=!1;const o=[];for(let r=0;r<t.components.length;r++){const i=t.components[r],s=Array.isArray(e)?r:i.name,a=Ce({param:i,value:e[s]});o.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?Pe(o):F(o.map(({encoded:r})=>r))}}function Gn(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}const $t=e=>bt(ht(e),0,4);function Jn(e){const{abi:t,args:n=[],name:o}=e,r=ee(o,{strict:!1}),i=t.filter(a=>r?a.type==="function"?$t(a)===o:a.type==="event"?Nn(a)===o:!1:"name"in a&&a.name===o);if(i.length===0)return;if(i.length===1)return i[0];let s;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((u,p)=>{const l="inputs"in a&&a.inputs[p];return l?$e(u,l):!1})){if(s&&"inputs"in s&&s.inputs){const u=St(a.inputs,s.inputs,n);if(u)throw new _t({abiItem:a,type:u[0]},{abiItem:s,type:u[1]})}s=a}}return s||i[0]}function $e(e,t){const n=typeof e,o=t.type;switch(o){case"address":return M(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return o==="tuple"&&"components"in t?Object.values(t.components).every((r,i)=>n==="object"&&$e(Object.values(e)[i],r)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(o)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(o)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(o)?Array.isArray(e)&&e.every(r=>$e(r,{...t,type:o.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function St(e,t,n){for(const o in e){const r=e[o],i=t[o];if(r.type==="tuple"&&i.type==="tuple"&&"components"in r&&"components"in i)return St(r.components,i.components,n[o]);const s=[r.type,i.type];if(s.includes("address")&&s.includes("bytes20")?!0:s.includes("address")&&s.includes("string")?M(n[o],{strict:!1}):s.includes("address")&&s.includes("bytes")?M(n[o],{strict:!1}):!1)return s}}const We="/docs/contract/encodeFunctionData";function Vn(e){const{abi:t,args:n,functionName:o}=e;let r=t[0];if(o){const i=Jn({abi:t,args:n,name:o});if(!i)throw new De(o,{docsPath:We});r=i}if(r.type!=="function")throw new De(void 0,{docsPath:We});return{abi:[r],functionName:$t(ve(r))}}function Xn(e){const{args:t}=e,{abi:n,functionName:o}=e.abi.length===1&&e.functionName?.startsWith("0x")?e:Vn(e),r=n[0],i=o,s="inputs"in r&&r.inputs?Dn(r.inputs,t??[]):void 0;return wt([i,s??"0x"])}const It={gwei:9,wei:18};function Kn(e,t){let n=e.toString();const o=n.startsWith("-");o&&(n=n.slice(1)),n=n.padStart(t,"0");let[r,i]=[n.slice(0,n.length-t),n.slice(n.length-t)];return i=i.replace(/(0+)$/,""),`${o?"-":""}${r||"0"}${i?`.${i}`:""}`}function U(e,t="wei"){return Kn(e,It[t])}function Qn(e,t,n,o){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,o);const r=BigInt(32),i=BigInt(4294967295),s=Number(n>>r&i),a=Number(n&i),d=o?4:0,u=o?0:4;e.setUint32(t+d,s,o),e.setUint32(t+u,a,o)}function Yn(e,t,n){return e&t^~e&n}function Zn(e,t,n){return e&t^e&n^t&n}class eo extends at{constructor(t,n,o,r){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=o,this.isLE=r,this.buffer=new Uint8Array(t),this.view=ge(this.buffer)}update(t){de(this),t=Te(t),Q(t);const{view:n,buffer:o,blockLen:r}=this,i=t.length;for(let s=0;s<i;){const a=Math.min(r-this.pos,i-s);if(a===r){const d=ge(t);for(;r<=i-s;s+=r)this.process(d,s);continue}o.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===r&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){de(this),st(t,this),this.finished=!0;const{buffer:n,view:o,blockLen:r,isLE:i}=this;let{pos:s}=this;n[s++]=128,Y(this.buffer.subarray(s)),this.padOffset>r-s&&(this.process(o,0),s=0);for(let l=s;l<r;l++)n[l]=0;Qn(o,r-8,BigInt(this.length*8),i),this.process(o,0);const a=ge(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=d/4,p=this.get();if(u>p.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,p[l],i)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const o=t.slice(0,n);return this.destroy(),o}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:o,length:r,finished:i,destroyed:s,pos:a}=this;return t.destroyed=s,t.finished=i,t.length=r,t.pos=a,r%n&&t.buffer.set(o),t}clone(){return this._cloneInto()}}const T=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),to=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),N=new Uint32Array(64);class no extends eo{constructor(t=32){super(64,t,8,!1),this.A=T[0]|0,this.B=T[1]|0,this.C=T[2]|0,this.D=T[3]|0,this.E=T[4]|0,this.F=T[5]|0,this.G=T[6]|0,this.H=T[7]|0}get(){const{A:t,B:n,C:o,D:r,E:i,F:s,G:a,H:d}=this;return[t,n,o,r,i,s,a,d]}set(t,n,o,r,i,s,a,d){this.A=t|0,this.B=n|0,this.C=o|0,this.D=r|0,this.E=i|0,this.F=s|0,this.G=a|0,this.H=d|0}process(t,n){for(let l=0;l<16;l++,n+=4)N[l]=t.getUint32(n,!1);for(let l=16;l<64;l++){const m=N[l-15],h=N[l-2],$=I(m,7)^I(m,18)^m>>>3,B=I(h,17)^I(h,19)^h>>>10;N[l]=B+N[l-7]+$+N[l-16]|0}let{A:o,B:r,C:i,D:s,E:a,F:d,G:u,H:p}=this;for(let l=0;l<64;l++){const m=I(a,6)^I(a,11)^I(a,25),h=p+m+Yn(a,d,u)+to[l]+N[l]|0,B=(I(o,2)^I(o,13)^I(o,22))+Zn(o,r,i)|0;p=u,u=d,d=a,a=s+h|0,s=i,i=r,r=o,o=h+B|0}o=o+this.A|0,r=r+this.B|0,i=i+this.C|0,s=s+this.D|0,a=a+this.E|0,d=d+this.F|0,u=u+this.G|0,p=p+this.H|0,this.set(o,r,i,s,a,d,u,p)}roundClean(){Y(N)}destroy(){this.set(0,0,0,0,0,0,0,0),Y(this.buffer)}}const oo=ct(()=>new no),ro=oo;class io extends f{constructor({value:t}){super(`Number \`${t}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function so(e,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new io({value:e});let[n,o="0"]=e.split(".");const r=n.startsWith("-");if(r&&(n=n.slice(1)),o=o.replace(/(0+)$/,""),t===0)Math.round(+`.${o}`)===1&&(n=`${BigInt(n)+1n}`),o="";else if(o.length>t){const[i,s,a]=[o.slice(0,t-1),o.slice(t-1,t),o.slice(t)],d=Math.round(+`${s}.${a}`);d>9?o=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):o=`${i}${d}`,o.length>t&&(o=o.slice(1),n=`${BigInt(n)+1n}`),o=o.slice(0,t)}else o=o.padEnd(t,"0");return BigInt(`${r?"-":""}${n}${o}`)}function ao(e,t="wei"){return so(e,It[t])}const te={RECIPIENT:"shadow.recipient.v1",ADDRESS:"shadow.address.v1",NULLIFIER:"shadow.nullifier.v1",POW:"shadow.pow.v1"},Z=10,je=32000000000000000000n,se=131072,Ge="0x30AEf68b8A1784C5C553be9391b6c7cbd1f76ba3",Je=120,C={BLOCK_NUMBER:0,STATE_ROOT:1,CHAIN_ID:33,NOTE_INDEX:34,AMOUNT:35,RECIPIENT:36,NULLIFIER:56,POW_DIGEST:88},co=new TextEncoder,w=167013n,Se="0x28c65",Ie="rpc.hoodi.taiko.xyz",uo=`https://${Ie}`,lo={chainId:Se,chainName:"Taiko Hoodi",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:[uo],blockExplorerUrls:["https://hoodi.taikoscan.io"]},po=document.querySelector("#app");po.innerHTML=`
  <main class="shell">
    <header>
      <p class="eyebrow">Shadow</p>
      <h1>Deposit, Prove, Claim</h1>
      <p class="sub">Minimal local-first UI for DEPOSIT file generation, prove command prep, and claim tx submission.</p>
      <div class="wallet-bar">
        <button id="wallet-connect" type="button">Connect Wallet</button>
        <button id="wallet-switch" class="hidden" type="button">Switch to Hoodi (167013)</button>
        <p id="wallet-status" class="wallet-status">Wallet: not connected</p>
      </div>
    </header>

    <nav class="tabs" aria-label="Main tabs">
      <button class="tab is-active" data-tab="deposit" type="button">Deposit</button>
      <button class="tab" data-tab="prove" type="button">Prove</button>
      <button class="tab" data-tab="claim" type="button">Claim</button>
    </nav>

    <section class="panel is-active" id="tab-deposit">
      <h2>Notes</h2>
      <div class="note-label-row" aria-hidden="true">
        <span>Recipient</span>
        <span>Amount (ETH)</span>
        <span>Label</span>
        <span></span>
      </div>
      <div id="deposit-note-list"></div>
      <div class="note-controls-row">
        <button id="deposit-add-note" class="note-action" type="button" aria-label="Add note" title="Add note">+</button>
      </div>

      <div id="deposit-generate-row" class="cta-row">
        <button id="deposit-download" type="button">Generate Deposit File</button>
      </div>

      <section id="deposit-generated" class="generated hidden">
        <h2>Summary</h2>
        <div class="generated-grid">
          <p><strong>Target</strong><span id="deposit-generated-target"></span></p>
          <p><strong>Total</strong><span id="deposit-generated-total"></span></p>
          <p>
            <strong>File path</strong>
            <span class="path-row">
              <span id="deposit-generated-path"></span>
              <button id="deposit-save-as" class="link-btn" type="button">Save As</button>
            </span>
          </p>
        </div>
      </section>
      <div id="deposit-generated-actions" class="generated-actions hidden">
        <div class="cta-row">
          <button id="deposit-send-ether" type="button" disabled>Deposit Ether</button>
          <button id="deposit-reset" type="button">Reset</button>
        </div>
        <div class="tx-row">
          <a id="deposit-tx-link" class="tx-link hidden" href="#" target="_blank" rel="noopener noreferrer">View transaction</a>
          <span id="deposit-tx-status" class="tx-status"></span>
        </div>
      </div>

      <pre id="deposit-output" class="output hidden"></pre>
    </section>

    <section class="panel" id="tab-prove">
      <div class="grid two">
        <label>
          RPC URL
          <input id="prove-rpc" type="text" value="${Ie}" placeholder="${Ie}" />
        </label>
        <label>
          Shadow contract (optional, for unclaimed check)
          <input id="prove-shadow-address" type="text" value="${Ge}" placeholder="0x..." />
        </label>
      </div>

      <div id="prove-drop-zone" class="drop-zone" role="button" tabindex="0">
        Drop DEPOSIT file here or click to choose
      </div>
      <input id="prove-file-input" type="file" accept="application/json,.json" hidden />
      <section id="prove-loaded-summary" class="generated hidden">
        <h2>Summary</h2>
        <div class="generated-grid">
          <p><strong>Target</strong><span id="prove-summary-target"></span></p>
          <p><strong>Total</strong><span id="prove-summary-total"></span></p>
          <p><strong>File path</strong><span id="prove-summary-path"></span></p>
        </div>
      </section>

      <div id="prove-note-select-wrap" class="hidden">
        <h2>Select One Unclaimed Note</h2>
        <div id="prove-note-list"></div>
      </div>
      <section id="prove-command-wrap" class="generated hidden">
        <div class="command-head">
          <h2>Generate Proof Command</h2>
          <button id="prove-command-copy" class="link-btn tiny-btn" type="button">Copy</button>
        </div>
        <pre id="prove-command" class="output command-output"></pre>
      </section>

      <pre id="prove-output" class="output"></pre>
    </section>

    <section class="panel" id="tab-claim">
      <label>
        Shadow contract address
        <input id="claim-shadow-address" type="text" value="${Ge}" placeholder="0x..." />
      </label>

      <div id="claim-drop-zone" class="drop-zone" role="button" tabindex="0">
        Drop proof file here or click to choose
      </div>
      <input id="claim-file-input" type="file" accept="application/json,.json,.proof" hidden />

      <div class="cta-row">
        <button id="claim-connect" type="button">Connect Wallet</button>
        <button id="claim-submit" type="button" disabled>Claim</button>
      </div>

      <pre id="claim-output" class="output"></pre>
    </section>
  </main>
`;const c={wallet:{account:"",chainId:null},deposit:{chainId:w.toString(),isGenerating:!1,generated:null,tx:null,nextNoteId:1,notes:[Ct(0)]},prove:{depositFileName:"",depositFilePath:"",depositJson:null,loadedSummary:null,commandText:"",validationStamp:"",resolvedChainId:null,targetAddress:"",totalAmount:0n,noteStatuses:[],selectedNoteIndex:null,sufficientBalance:!1},claim:{account:"",proofJson:null,proofPayload:null,proofFileName:""}};fo();ho();go();wo();$o();R();X();Ee();q();function fo(){const e=[...document.querySelectorAll(".tab")];e.forEach(t=>{t.addEventListener("click",()=>{e.forEach(o=>o.classList.remove("is-active")),t.classList.add("is-active"),[...document.querySelectorAll(".panel")].forEach(o=>o.classList.remove("is-active")),document.querySelector(`#tab-${t.dataset.tab}`)?.classList.add("is-active")})})}function ho(){const e=document.querySelector("#wallet-connect"),t=document.querySelector("#wallet-switch");if(e.addEventListener("click",async()=>{try{await At()}catch(n){ue(`Wallet error: ${x(n)}`)}}),t.addEventListener("click",async()=>{try{await mo()}catch(n){ue(`Switch error: ${x(n)}`)}}),!window.ethereum){E();return}window.ethereum.request({method:"eth_accounts"}).then(n=>{n?.[0]&&(c.wallet.account=g(n[0]),c.claim.account=c.wallet.account),E(),H(),b()}).catch(()=>{E()}),window.ethereum.request({method:"eth_chainId"}).then(n=>{c.wallet.chainId=BigInt(n),E(),H(),b()}).catch(()=>{E()}),window.ethereum.on?.("accountsChanged",n=>{c.wallet.account=n?.[0]?g(n[0]):"",c.claim.account=c.wallet.account,E(),H(),b()}),window.ethereum.on?.("chainChanged",n=>{c.wallet.chainId=BigInt(n),E(),H(),b()})}async function At(){if(!window.ethereum)throw new Error("No injected wallet detected. Install MetaMask or another EIP-1193 wallet.");const[e,t]=await Promise.all([window.ethereum.request({method:"eth_requestAccounts"}),window.ethereum.request({method:"eth_chainId"})]),n=e?.[0];if(!n)throw new Error("Wallet did not return an account.");c.wallet.account=g(n),c.wallet.chainId=BigInt(t),c.claim.account=c.wallet.account,E(),H(),b()}async function mo(){if(!window.ethereum)throw new Error("No injected wallet detected. Install MetaMask or another EIP-1193 wallet.");try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:Se}]})}catch(t){if(Number(t?.code)!==4902)throw t;await window.ethereum.request({method:"wallet_addEthereumChain",params:[lo]}),await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:Se}]})}const e=await window.ethereum.request({method:"eth_chainId"});c.wallet.chainId=BigInt(e),E(),H(),b()}function E(){const e=document.querySelector("#wallet-connect"),t=document.querySelector("#wallet-switch"),n=document.querySelector("#wallet-status");if(!window.ethereum){e.disabled=!0,t.classList.add("hidden"),ue("Wallet: not detected (install MetaMask)");return}e.disabled=!1;const o=c.wallet.account,r=c.wallet.chainId;if(!o){e.textContent="Connect Wallet",t.classList.add("hidden"),ue("Wallet: not connected");return}const[i,s]=He(o);e.textContent="Wallet Connected",r&&r!==w?t.classList.remove("hidden"):t.classList.add("hidden");const a=r?r.toString():"unknown";n.textContent=`Wallet: 0x${i}...${s}  |  Chain: ${a}`}function ue(e){const t=document.querySelector("#wallet-status");t.textContent=e}function go(){const e=document.querySelector("#deposit-download"),t=document.querySelector("#deposit-add-note"),n=document.querySelector("#deposit-send-ether"),o=document.querySelector("#deposit-reset"),r=document.querySelector("#deposit-save-as");t.addEventListener("click",()=>{if(!(c.deposit.isGenerating||c.deposit.generated)){if(c.deposit.notes.length>=Z){k(`Maximum ${Z} notes allowed.`);return}c.deposit.notes.push(Ct(c.deposit.nextNoteId)),c.deposit.nextNoteId+=1,R()}}),n.addEventListener("click",async()=>{try{if(!c.deposit.generated)throw new Error("Generate deposit first.");if(!c.wallet.account)throw new Error("Connect wallet first.");if(c.wallet.chainId!==w)throw new Error("Switch wallet to Hoodi (167013) first.");if(!window.ethereum)throw new Error("No injected wallet detected.");n.disabled=!0;const i=await window.ethereum.request({method:"eth_sendTransaction",params:[{from:c.wallet.account,to:c.deposit.generated.targetAddress,value:Uo(c.deposit.generated.totalWei)}]});c.deposit.tx={hash:i,status:"pending"},X(),V(),yo(i)}catch(i){k(x(i)),b()}}),r.addEventListener("click",async()=>{try{const i=c.deposit.generated;if(!i?.depositJson)throw new Error("Generate deposit file first.");const s=await qo(i);s&&(c.deposit.generated.filePath=s,X()),V()}catch(i){if(i?.name==="AbortError"){V();return}k(x(i))}}),o.addEventListener("click",()=>{c.deposit.generated=null,c.deposit.tx=null,c.deposit.isGenerating=!1,X(),R(),b(),V()}),e.addEventListener("click",async()=>{if(!c.deposit.generated){e.disabled=!0,t.disabled=!0,c.deposit.isGenerating=!0,R(),b();try{k("Generating PoW-valid secret and building deposit...");const i=await Bo(c.deposit,{minePowSecret:!0,onMiningProgress:l=>{k(`Generating PoW-valid secret and building deposit... attempts: ${l.toLocaleString()}`)}}),s=Oe(),[a,d]=He(i.targetAddress),u=`deposit-${a}-${d}-${s}.json`,p=`Downloads/${u}`;Pt(u,i.depositJson),c.deposit.generated={fileName:u,filePath:p,targetAddress:i.targetAddress,totalWei:i.totalWei,depositJson:i.depositJson},c.deposit.tx=null,X(),V()}catch(i){k(x(i))}finally{c.deposit.isGenerating=!1,R(),t.disabled=!!c.deposit.generated,e.disabled=!1,b()}}})}function R(){const e=document.querySelector("#deposit-note-list");e.innerHTML="",c.deposit.notes.forEach((t,n)=>{const o=c.deposit.notes.length>1,r=c.deposit.isGenerating||!!c.deposit.generated,i=document.createElement("div");i.className="note-row",i.innerHTML=`
      <input data-index="${n}" data-key="recipient" aria-label="Recipient" type="text" value="${be(t.recipient)}" placeholder="0x..." ${r?"disabled":""} />
      <input data-index="${n}" data-key="amountEth" aria-label="Amount (ETH)" type="text" value="${be(t.amountEth)}" placeholder="0.01" ${r?"disabled":""} />
      <input data-index="${n}" data-key="label" aria-label="Label" type="text" value="${be(t.label)}" placeholder="team wallet" ${r?"disabled":""} />
      <button data-index="${n}" class="danger note-action" type="button" aria-label="Remove note" title="Remove note" ${o&&!r?"":"disabled"}>-</button>
    `,i.querySelectorAll("input").forEach(s=>{s.addEventListener("input",a=>{const d=Number(a.target.dataset.index),u=a.target.dataset.key;c.deposit.notes[d][u]=a.target.value.trim()})}),i.querySelector("button").addEventListener("click",s=>{if(!o)return;const a=Number(s.target.dataset.index);c.deposit.notes.splice(a,1),R()}),e.appendChild(i)})}function X(){const e=document.querySelector("#deposit-generated"),t=document.querySelector("#deposit-generated-actions"),n=document.querySelector("#deposit-generate-row"),o=document.querySelector("#deposit-add-note"),r=c.deposit.generated;if(o.disabled=c.deposit.isGenerating||!!r,!r){e.classList.add("hidden"),t.classList.add("hidden"),n.classList.remove("hidden"),document.querySelector("#deposit-generated-target").textContent="",document.querySelector("#deposit-generated-total").textContent="",document.querySelector("#deposit-generated-path").textContent="",document.querySelector("#deposit-save-as").disabled=!0,Ae();return}e.classList.remove("hidden"),t.classList.remove("hidden"),n.classList.add("hidden"),document.querySelector("#deposit-generated-target").textContent=r.targetAddress,document.querySelector("#deposit-generated-total").textContent=`${r.totalWei.toString()} wei (${U(r.totalWei)} ETH)`,document.querySelector("#deposit-generated-path").textContent=r.filePath,document.querySelector("#deposit-save-as").disabled=!1,Ae(),b()}function Ae(){const e=c.deposit.tx,t=document.querySelector("#deposit-tx-link"),n=document.querySelector("#deposit-tx-status");if(!e?.hash){t.classList.add("hidden"),t.href="#",n.textContent="";return}t.classList.remove("hidden"),t.href=`https://hoodi.taikoscan.io/tx/${e.hash}`,e.status==="confirmed"?n.textContent="Confirmed":e.status==="failed"?n.textContent="Failed":n.textContent="Confirming..."}function b(){const e=document.querySelector("#deposit-send-ether");if(!e)return;const t=!!c.deposit.generated,n=!!c.wallet.account&&c.wallet.chainId===w,o=c.deposit.tx?.status==="pending",r=c.deposit.tx?.status==="confirmed";e.disabled=!(t&&n)||o||r}async function yo(e){if(window.ethereum)for(;c.deposit.tx?.hash===e&&c.deposit.tx?.status==="pending";){try{const t=await window.ethereum.request({method:"eth_getTransactionReceipt",params:[e]});if(t){c.deposit.tx.status=t.status==="0x1"?"confirmed":"failed",Ae(),b();return}}catch(t){k(`Receipt check failed: ${x(t)}`);return}await _o(3e3)}}function wo(){const e=document.querySelector("#prove-command-copy"),t=document.querySelector("#prove-note-select-wrap"),n=async(o={})=>{if(!c.prove.depositJson)throw new Error("Load a DEPOSIT file first.");y("prove-output","Validating deposit..."),c.prove.selectedNoteIndex=null,c.prove.noteStatuses=[],c.prove.sufficientBalance=!1,c.prove.commandText="",c.prove.validationStamp="",q(),t.classList.add("hidden");const r=document.querySelector("#prove-rpc").value.trim();if(!r)throw new Error("RPC URL is required.");const i=Lt(r),s=await To(i);let a=s;if(c.prove.depositJson.chainId&&(a=BigInt(c.prove.depositJson.chainId),a!==s))throw new Error(`chainId mismatch: deposit=${a.toString()} rpc=${s.toString()}`);if(a!==w)throw new Error(`Only Hoodi (167013) is supported. Resolved chainId=${a.toString()}`);const u=o.precomputedDerived&&o.precomputedChainId===a?o.precomputedDerived:await Le(c.prove.depositJson,a);if(c.prove.depositJson.targetAddress){const S=g(c.prove.depositJson.targetAddress);if(S!==u.targetAddress)throw new Error(`targetAddress mismatch: deposit=${S} derived=${u.targetAddress}`)}const p=await No(i,u.targetAddress),l=p>=u.totalAmount;if(c.prove.targetAddress=u.targetAddress,c.prove.totalAmount=u.totalAmount,c.prove.resolvedChainId=a,c.prove.sufficientBalance=l,!l){y("prove-output",[`Target address: ${u.targetAddress}`,`Resolved chainId: ${a.toString()}`,`Balance: ${p.toString()} wei (${U(p)} ETH)`,`Required: ${u.totalAmount.toString()} wei (${U(u.totalAmount)} ETH)`,"Balance sufficient: no"].join(`
`));return}const m=document.querySelector("#prove-shadow-address").value.trim(),h=m?g(m):"",$=await Promise.all(u.notes.map(async S=>{if(!h)return{...S,claimed:!1,claimedSource:"assumed"};const kt=await Co(i,h,S.nullifier);return{...S,claimed:kt,claimedSource:"onchain"}}));c.prove.noteStatuses=$;const B=$.find(S=>!S.claimed);c.prove.selectedNoteIndex=B?B.index:null,c.prove.validationStamp=Oe(),vo();const j=$.filter(S=>!S.claimed).length,he=[`Target address: ${u.targetAddress}`,`Resolved chainId: ${a.toString()}`,`Balance: ${p.toString()} wei (${U(p)} ETH)`,`Required: ${u.totalAmount.toString()} wei (${U(u.totalAmount)} ETH)`,`Balance sufficient: ${l?"yes":"no"}`,h?`Unclaimed notes: ${j}/${$.length} (on-chain checked)`:`Unclaimed notes: ${j}/${$.length} (assumed, no Shadow contract provided)`];y("prove-output",he.join(`
`)),l&&j>0&&c.prove.selectedNoteIndex!==null?c.prove.commandText=Et(c.prove.selectedNoteIndex):c.prove.commandText="",q()};e.addEventListener("click",async()=>{try{if(!c.prove.commandText)return;await navigator.clipboard.writeText(c.prove.commandText),y("prove-output","Proof command copied.")}catch(o){y("prove-output",`Copy failed: ${x(o)}`)}}),Bt({zone:document.querySelector("#prove-drop-zone"),fileInput:document.querySelector("#prove-file-input"),onFile:async o=>{try{const r=await Tt(o),i=Lo(r),s=BigInt(i.chainId),a=await Le(i,s);if(i.targetAddress){const d=g(i.targetAddress);if(d!==a.targetAddress)throw new Error(`targetAddress mismatch: deposit=${d} derived=${a.targetAddress}`)}c.prove.depositFileName=o.name,c.prove.depositFilePath=bo(o),c.prove.depositJson=i,c.prove.loadedSummary={targetAddress:a.targetAddress,totalWei:a.totalAmount,filePath:c.prove.depositFilePath||o.name},c.prove.commandText="",c.prove.validationStamp="",c.prove.targetAddress=a.targetAddress,c.prove.totalAmount=a.totalAmount,c.prove.resolvedChainId=s,c.prove.selectedNoteIndex=null,c.prove.noteStatuses=[],c.prove.sufficientBalance=!1,Ee(),q();try{await n({precomputedDerived:a,precomputedChainId:s})}catch(d){c.prove.noteStatuses=[],c.prove.selectedNoteIndex=null,c.prove.sufficientBalance=!1,c.prove.commandText="",c.prove.validationStamp="",t.classList.add("hidden"),q(),y("prove-output",x(d))}}catch(r){c.prove.depositFileName="",c.prove.depositFilePath="",c.prove.depositJson=null,c.prove.loadedSummary=null,c.prove.selectedNoteIndex=null,c.prove.noteStatuses=[],c.prove.sufficientBalance=!1,c.prove.commandText="",c.prove.validationStamp="",c.prove.targetAddress="",c.prove.totalAmount=0n,c.prove.resolvedChainId=null,Ee(),q(),t.classList.add("hidden"),y("prove-output",x(r))}}})}function Ee(){const e=document.querySelector("#prove-loaded-summary"),t=c.prove.loadedSummary;if(!t){e.classList.add("hidden"),document.querySelector("#prove-summary-target").textContent="",document.querySelector("#prove-summary-total").textContent="",document.querySelector("#prove-summary-path").textContent="";return}e.classList.remove("hidden"),document.querySelector("#prove-summary-target").textContent=t.targetAddress,document.querySelector("#prove-summary-total").textContent=`${t.totalWei.toString()} wei (${U(t.totalWei)} ETH)`,document.querySelector("#prove-summary-path").textContent=t.filePath}function q(){const e=document.querySelector("#prove-command-wrap"),t=c.prove.commandText;if(!t){e.classList.add("hidden"),document.querySelector("#prove-command").textContent="";return}e.classList.remove("hidden"),document.querySelector("#prove-command").textContent=t}function Et(e){const t=document.querySelector("#prove-rpc").value.trim(),n=Lt(t),[o,r]=He(c.prove.targetAddress),i=c.prove.validationStamp||Oe(),s=`deposit-${o}-${r}-${i}-${e}.proof.json`;return["cd /Users/d/Projects/taiko/shadow","node packages/risc0-prover/scripts/shadowcli.mjs prove \\",`  --deposit ${xo(c.prove.depositFilePath||c.prove.depositFileName||"deposit.json")} \\`,`  --rpc "${n}" \\`,`  --note-index ${e} \\`,"  --receipt-kind groth16 \\",`  --proof-out "${s}"`].join(`
`)}function bo(e){const t=e&&typeof e.path=="string"?e.path.trim():"";if(t)return t;const n=e&&typeof e.webkitRelativePath=="string"?e.webkitRelativePath.trim():"";return n||e?.name||""}function xo(e){return`'${String(e).replace(/'/g,`'"'"'`)}'`}function vo(){const e=document.querySelector("#prove-note-select-wrap"),t=document.querySelector("#prove-note-list");t.innerHTML="";const n=c.prove.noteStatuses.filter(o=>!o.claimed);if(n.length===0){c.prove.selectedNoteIndex=null,e.classList.remove("hidden"),t.innerHTML='<p class="sub">No unclaimed notes available.</p>';return}e.classList.remove("hidden"),n.forEach(o=>{const r=document.createElement("label");r.className="note-choice",r.innerHTML=`
      <input type="radio" name="prove-note" value="${o.index}" ${o.index===c.prove.selectedNoteIndex?"checked":""} />
      <span>
        #${o.index} â€¢ ${U(o.amountWei)} ETH (${o.amountWei.toString()} wei)
        <small>Recipient: ${o.recipient}</small>
      </span>
    `,r.querySelector("input").addEventListener("change",()=>{c.prove.selectedNoteIndex=o.index,c.prove.commandText=Et(o.index),q()}),t.appendChild(r)})}function $o(){Bt({zone:document.querySelector("#claim-drop-zone"),fileInput:document.querySelector("#claim-file-input"),onFile:async e=>{try{const t=await Tt(e),n=So(t),o=Ve(n.proof);c.claim.proofJson=t,c.claim.proofPayload=n,c.claim.proofFileName=e.name,H(),y("claim-output",[`Loaded proof file: ${e.name}`,`Proof version: ${String(t.version||"unknown")}`,`Chain ID: ${n.chainId.toString()}`,`Note index: ${n.claimInput.noteIndex.toString()}`,`Proof bytes: ${o.toLocaleString()}`,o>se?`Tx-size warning: proof bytes exceed Hoodi limit (${se}).`:"Tx-size check: within Hoodi limit."].join(`
`))}catch(t){y("claim-output",x(t))}}}),document.querySelector("#claim-connect").addEventListener("click",async()=>{try{await At(),y("claim-output",`Connected wallet: ${c.claim.account}`)}catch(e){y("claim-output",x(e))}}),document.querySelector("#claim-submit").addEventListener("click",async()=>{try{if(!window.ethereum)throw new Error("Injected wallet is required.");if(!c.claim.account)throw new Error("Connect wallet first.");if(!c.claim.proofPayload)throw new Error("Load proof file first.");const e=g(document.querySelector("#claim-shadow-address").value.trim()),t=BigInt(await window.ethereum.request({method:"eth_chainId"})),n=c.claim.proofPayload.chainId;if(t!==w)throw new Error(`Only Hoodi (167013) is supported. Wallet chainId is ${t.toString()}.`);if(n!==w)throw new Error(`Only Hoodi (167013) proofs are supported. Proof chainId is ${n.toString()}.`);if(t!==n)throw new Error(`wallet chainId (${t.toString()}) does not match proof chainId (${n.toString()})`);const o=Xn({abi:[{type:"function",name:"claim",stateMutability:"nonpayable",inputs:[{name:"_proof",type:"bytes"},{name:"_input",type:"tuple",components:[{name:"blockNumber",type:"uint48"},{name:"stateRoot",type:"bytes32"},{name:"chainId",type:"uint256"},{name:"noteIndex",type:"uint256"},{name:"amount",type:"uint256"},{name:"recipient",type:"address"},{name:"nullifier",type:"bytes32"},{name:"powDigest",type:"bytes32"}]}],outputs:[]}],functionName:"claim",args:[c.claim.proofPayload.proof,c.claim.proofPayload.claimInput]}),r=Ve(o);if(r>se)throw new Error(`proof tx is too large (${r} bytes > ${se}). Regenerate proof using --receipt-kind groth16.`);const i=await window.ethereum.request({method:"eth_sendTransaction",params:[{from:c.claim.account,to:e,data:o}]});y("claim-output",[`Submitted claim tx: ${i}`,`Proof file: ${c.claim.proofFileName}`,`Contract: ${e}`].join(`
`))}catch(e){y("claim-output",x(e))}}),document.querySelector("#claim-shadow-address").addEventListener("input",()=>{H()})}function H(){const e=!!document.querySelector("#claim-shadow-address").value.trim(),t=c.wallet.chainId===w;document.querySelector("#claim-submit").disabled=!(e&&c.claim.proofPayload&&c.claim.account&&t)}function So(e){if(!e||typeof e!="object")throw new Error("Invalid proof file: expected JSON object");const t=Io(e),n=Ao(e),o=n?Eo(n):null,r=L(e.blockNumber??o?.blockNumber,"blockNumber"),i=L(e.chainId??o?.chainId,"chainId"),s=L(e.noteIndex??o?.noteIndex,"noteIndex"),a=L(e.amount??o?.amount,"amount"),d=g(e.recipient??o?.recipient,"recipient"),u=String(e.nullifier??o?.nullifier??""),p=String(e.stateRoot??o?.stateRoot??""),l=String(e.powDigest??o?.powDigest??"");if(K(u,32,"nullifier"),K(p,32,"stateRoot"),K(l,32,"powDigest"),r>(1n<<48n)-1n)throw new Error("blockNumber exceeds uint48 range");if(a<=0n)throw new Error("amount must be > 0");if(!Nt(pe(l)))throw new Error("powDigest is invalid (last 24 bits must be zero)");return o&&(P("blockNumber",r,o.blockNumber),P("chainId",i,o.chainId),P("noteIndex",s,o.noteIndex),P("amount",a,o.amount),P("recipient",d,o.recipient),P("nullifier",u.toLowerCase(),o.nullifier.toLowerCase()),P("stateRoot",p.toLowerCase(),o.stateRoot.toLowerCase()),P("powDigest",l.toLowerCase(),o.powDigest.toLowerCase())),{proof:t,chainId:i,claimInput:{blockNumber:r,stateRoot:p,chainId:i,noteIndex:s,amount:a,recipient:d,nullifier:u,powDigest:l}}}function Io(e){const t=e?.risc0?.proof??e?.proofHex??e?.risc0?.proofHex;if(typeof t!="string"||!/^0x[0-9a-fA-F]*$/.test(t)||t.length%2!==0)throw new Error("Invalid proof file: missing valid proof bytes (risc0.proof or proofHex)");return t}function Ao(e){return Array.isArray(e?.publicInputs)?e.publicInputs:Array.isArray(e?.risc0?.publicInputs)?e.risc0.publicInputs:null}function Eo(e){if(!Array.isArray(e)||e.length!==Je)throw new Error(`Invalid proof file: publicInputs must have length ${Je}`);return{blockNumber:L(e[C.BLOCK_NUMBER],"publicInputs.blockNumber"),chainId:L(e[C.CHAIN_ID],"publicInputs.chainId"),noteIndex:L(e[C.NOTE_INDEX],"publicInputs.noteIndex"),amount:L(e[C.AMOUNT],"publicInputs.amount"),recipient:g(O(ae(e,C.RECIPIENT,20))),nullifier:O(ae(e,C.NULLIFIER,32)),stateRoot:O(ae(e,C.STATE_ROOT,32)),powDigest:O(ae(e,C.POW_DIGEST,32))}}function ae(e,t,n){if(e.length<t+n)throw new Error(`Invalid proof file: publicInputs out of range for offset ${t} length ${n}`);const o=new Uint8Array(n);for(let r=0;r<n;r+=1){const i=L(e[t+r],`publicInputs[${t+r}]`);if(i<0n||i>255n)throw new Error(`Invalid proof file: publicInputs[${t+r}] is not a byte`);o[r]=Number(i)}return o}function P(e,t,n){if(t!==n)throw new Error(`Invalid proof file: ${e} does not match publicInputs`)}function L(e,t){if(typeof e=="bigint")return e;if(typeof e=="number"&&Number.isInteger(e)&&e>=0||typeof e=="string"&&(/^0x[0-9a-fA-F]+$/.test(e)||/^[0-9]+$/.test(e)))return BigInt(e);throw new Error(`Invalid ${t}: expected integer`)}function Ve(e){return typeof e!="string"||!e.startsWith("0x")?0:(e.length-2)/2}function Lt(e){return e?/^https?:\/\//i.test(e)?e:`https://${e}`:""}function Bt({zone:e,fileInput:t,onFile:n}){e.addEventListener("click",()=>t.click()),e.addEventListener("keypress",o=>{(o.key==="Enter"||o.key===" ")&&t.click()}),t.addEventListener("change",async o=>{const r=o.target.files?.[0];r&&await n(r),t.value=""}),["dragenter","dragover"].forEach(o=>{e.addEventListener(o,r=>{r.preventDefault(),e.classList.add("is-over")})}),["dragleave","drop"].forEach(o=>{e.addEventListener(o,r=>{r.preventDefault(),e.classList.remove("is-over")})}),e.addEventListener("drop",async o=>{const r=o.dataTransfer?.files?.[0];r&&await n(r)})}async function Tt(e){const t=await e.text();try{return JSON.parse(t)}catch{throw new Error(`Invalid JSON file: ${e.name}`)}}function Lo(e){if(!e||typeof e!="object")throw new Error("Invalid deposit JSON");if(e.version!=="v1")throw new Error("deposit.version must be v1");if(K(e.secret,32,"secret"),typeof e.chainId!="string"||!/^[0-9]+$/.test(e.chainId))throw new Error("deposit.chainId must be a decimal string");if(BigInt(e.chainId)!==w)throw new Error(`deposit.chainId must be ${w.toString()} (Hoodi)`);if(!Array.isArray(e.notes)||e.notes.length===0||e.notes.length>Z)throw new Error(`deposit.notes must contain 1..${Z} notes`);const t=e.notes.map((o,r)=>{const i=g(o.recipient,`notes[${r}].recipient`);if(typeof o.amount!="string"||!/^[1-9][0-9]*$/.test(o.amount))throw new Error(`notes[${r}].amount must be a non-zero wei integer string`);const s={recipient:i,amount:o.amount};return o.label&&(s.label=String(o.label)),s}),n={version:"v1",chainId:e.chainId,secret:e.secret.toLowerCase(),notes:t};return e.targetAddress!==void 0&&(n.targetAddress=g(e.targetAddress,"targetAddress")),n}async function Bo(e,t={}){if(e.chainId&&BigInt(e.chainId)!==w)throw new Error(`Only Hoodi (${w.toString()}) is supported.`);const n=w;if(!Array.isArray(e.notes)||e.notes.length===0)throw new Error("Add at least one note.");const o=e.notes.map((d,u)=>{const p=g(d.recipient,`notes[${u}].recipient`);let l;try{l=ao(d.amountEth||"0")}catch{throw new Error(`notes[${u}].amount must be a valid ETH number`)}if(l<=0n)throw new Error(`notes[${u}].amount must be > 0 ETH`);const m={recipient:p,amount:l.toString()};return d.label&&(m.label=d.label),m});let r=e.secret,i=0;if(t.minePowSecret){const d=await Do(t.onMiningProgress);r=d.secretHex,i=d.attempts}K(r,32,"secret");const s={version:"v1",chainId:n.toString(),secret:r.toLowerCase(),notes:o},a=await Le(s,n);if(!a.powDigestValid)throw new Error("secret does not satisfy PoW requirement (powDigest last 24 bits must be zero).");return s.targetAddress=a.targetAddress,{depositJson:s,targetAddress:a.targetAddress,totalWei:a.totalAmount,powAttempts:i}}async function Le(e,t){const n=pe(e.secret),o=[],r=[],i=[];let s=0n;for(let l=0;l<e.notes.length;l+=1){const m=e.notes[l],h=BigInt(m.amount),$=g(m.recipient),B=pe($),j=await Po(B),he=O(await Oo(n,t,l));o.push(h),r.push(j),s+=h,i.push({index:l,recipient:$,amountWei:h,nullifier:he})}if(s>je)throw new Error(`total amount exceeds protocol max (${je.toString()} wei)`);const a=await ko(o,r),d=await Ho(n,t,a),u=g(O(d)),p=O(await zo(n));return{notes:i,targetAddress:u,totalAmount:s,powDigest:p,powDigestValid:p.endsWith("000000")}}async function To(e){const t=await ke(e,"eth_chainId",[]);return BigInt(t)}async function No(e,t){const n=await ke(e,"eth_getBalance",[t,"latest"]);return BigInt(n)}async function Co(e,t,n){const o=`0x6346e832${n.slice(2)}`,r=await ke(e,"eth_call",[{to:t,data:o},"latest"]);return BigInt(r)!==0n}async function ke(e,t,n){const o=await fetch(e,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:1,method:t,params:n})});if(!o.ok)throw new Error(`RPC error ${o.status} on ${t}`);const r=await o.json();if(r.error)throw new Error(r.error.message||`RPC ${t} failed`);return r.result}async function Po(e){if(e.length!==20)throw new Error("recipient bytes must be 20 bytes");const t=ne(te.RECIPIENT),n=new Uint8Array(32);return n.set(e,12),re(oe(t,n))}async function ko(e,t){const n=new Uint8Array(Z*64);for(let o=0;o<e.length;o+=1)n.set(le(e[o]),o*64),n.set(t[o],o*64+32);return re(n)}async function Ho(e,t,n){const o=oe(ne(te.ADDRESS),le(t),e,n);return(await re(o)).slice(12)}async function Oo(e,t,n){const o=oe(ne(te.NULLIFIER),le(t),e,le(BigInt(n)));return re(o)}async function zo(e){const t=oe(ne(te.POW),e);return re(t)}function ne(e){const t=co.encode(e);if(t.length>32)throw new Error("magic label exceeds 32 bytes");const n=new Uint8Array(32);return n.set(t),n}function le(e){if(e<0n)throw new Error("cannot encode negative bigint");let t=e.toString(16);if(t.length>64)throw new Error("bigint exceeds 32 bytes");return t=t.padStart(64,"0"),pe(`0x${t}`)}function oe(...e){const t=e.reduce((r,i)=>r+i.length,0),n=new Uint8Array(t);let o=0;for(const r of e)n.set(r,o),o+=r.length;return n}async function re(e){const t=await crypto.subtle.digest("SHA-256",e);return new Uint8Array(t)}function pe(e){return Jt(e,"bytes")}function O(e){return`0x${[...e].map(t=>t.toString(16).padStart(2,"0")).join("")}`}function K(e,t,n){if(typeof e!="string"||!e.startsWith("0x"))throw new Error(`${n} must be 0x-prefixed hex`);if(e.length-2!==t*2||!/^[0-9a-fA-F]+$/.test(e.slice(2)))throw new Error(`${n} must be ${t} bytes hex`)}function g(e,t="address"){if(!M(e))throw new Error(`${t} is not a valid address`);return Cn(e)}async function Do(e){const t=ne(te.POW);let n=0;for(;;){const o=crypto.getRandomValues(new Uint8Array(32)),r=ro(oe(t,o));if(n+=1,Nt(r))return{secretHex:O(o),attempts:n};n%2e4===0&&(e?.(n),await new Promise(i=>setTimeout(i,0)))}}function Nt(e){return e[29]===0&&e[30]===0&&e[31]===0}function Ct(e=0){return{recipient:"",amountEth:"",label:`note #${e}`}}function He(e){const t=e.toLowerCase().replace(/^0x/,"");return[t.slice(0,4),t.slice(-4)]}function Oe(){const e=new Date,t=n=>String(n).padStart(2,"0");return`${e.getFullYear()}${t(e.getMonth()+1)}${t(e.getDate())}T${t(e.getHours())}${t(e.getMinutes())}${t(e.getSeconds())}`}async function qo(e){const t=JSON.stringify(e.depositJson,null,2);if(typeof window.showSaveFilePicker=="function"){const n=await window.showSaveFilePicker({suggestedName:e.fileName,types:[{description:"JSON file",accept:{"application/json":[".json"]}}]}),o=await n.createWritable();return await o.write(t),await o.close(),n.name||e.fileName}return Pt(e.fileName,e.depositJson),e.fileName}function Uo(e){return`0x${e.toString(16)}`}function _o(e){return new Promise(t=>setTimeout(t,e))}function Pt(e,t){const n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),o=URL.createObjectURL(n),r=document.createElement("a");r.href=o,r.download=e,document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(o)}function y(e,t){document.querySelector(`#${e}`).textContent=t}function k(e){const t=document.querySelector("#deposit-output");if(!t)return;const n=String(e??"").trim();t.textContent=n,t.classList.toggle("hidden",n.length===0)}function V(){k("")}function be(e){return String(e).replaceAll("&","&amp;").replaceAll('"',"&quot;").replaceAll("<","&lt;").replaceAll(">","&gt;")}function x(e){return e instanceof Error?e.message:String(e)}
